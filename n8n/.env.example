# =============================================================================
# n8n Workflow Automation Configuration
# With worker architecture for performance
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration (REQUIRED - Auto-generated by setup script)
# -----------------------------------------------------------------------------
# PostgreSQL connection (uses common-postgres service)
# Database 'n8n' is auto-created by common/init-db.sql
POSTGRES_USER=postgres
POSTGRES_PASSWORD=GENERATE_RANDOM_32

# -----------------------------------------------------------------------------
# Encryption Key (REQUIRED - Auto-generated by setup script)
# -----------------------------------------------------------------------------
# Used to encrypt credentials stored in the database
# IMPORTANT: Keep this secret safe! Losing it means losing access to encrypted data
N8N_ENCRYPTION_KEY=GENERATE_RANDOM_32

# -----------------------------------------------------------------------------
# Authentication (REQUIRED - Pre-configured for local-only)
# -----------------------------------------------------------------------------
# Authentication disabled for local-only setup
# Change to 'true' and add N8N_BASIC_AUTH_USER/PASSWORD if needed
N8N_BASIC_AUTH_ACTIVE=false

# -----------------------------------------------------------------------------
# Network Configuration (REQUIRED - Pre-configured)
# -----------------------------------------------------------------------------
# Hostname for webhooks and external access
N8N_HOST=n8n.localhost
WEBHOOK_URL=http://n8n.localhost

# -----------------------------------------------------------------------------
# Timezone (REQUIRED - Pre-configured)
# -----------------------------------------------------------------------------
GENERIC_TIMEZONE=America/New_York
TZ=America/New_York

# -----------------------------------------------------------------------------
# Execution Settings (REQUIRED - Pre-configured)
# -----------------------------------------------------------------------------
# Allow external npm packages in function nodes
NODE_FUNCTION_ALLOW_EXTERNAL=axios,qs,lodash

# Enable AI tool usage in workflows
N8N_COMMUNITY_PACKAGES_ALLOW_TOOL_USAGE=true

# Maximum iterations for AI agent loops
N8N_AGENT_MAX_LOOP_ITERATIONS=1000

# -----------------------------------------------------------------------------
# Ollama Integration (OPTIONAL)
# -----------------------------------------------------------------------------
# n8n can connect to host-based Ollama via host.docker.internal:11434
# Configure Ollama nodes in workflows with:
# - Base URL: http://host.docker.internal:11434
# - Model: gpt-oss or llama3.1
#
# Available AI features:
# - LLM Chain nodes for text generation
# - AI Agent nodes for autonomous task execution
# - Embeddings for vector operations (use with Qdrant)
# - Tool nodes for function calling

# -----------------------------------------------------------------------------
# Service Information
# -----------------------------------------------------------------------------
# Access URL: http://n8n.localhost
#
# Features:
# - Visual workflow automation builder
# - 400+ integrations (APIs, databases, tools)
# - AI/LLM nodes with Ollama support
# - Queue-based execution with worker for performance
# - PostgreSQL storage for workflows and executions
# - Redis queue for background job processing
#
# Dependencies:
# - common-postgres (database)
# - common-redis (queue)
# - host Ollama (optional AI features)
#
# Architecture:
# - n8n: Main service with web UI and API
# - n8n-worker: Background worker for executing queued workflows
# - Queue mode enabled for better performance and scalability
